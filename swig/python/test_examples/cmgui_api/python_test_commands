export LD_LIBRARY_PATH=$CMISS_ROOT/cmgui/lib/i686-linux/cmgui-wx-debug/

***simple python console commands for testing execute_command***

#================================================#
#=Initiate and load an example femur mesh (mean)=#
#================================================#
import execute_command
a = execute_command.new_Cmiss_command_data()
execute_command.Cmiss_command_data_execute_command(a, "gfx re no mean")
execute_command.Cmiss_command_data_execute_command(a, "gfx re elem mean")

#==============================================================#
#=obtain cmiss_region objects to query number of nodes in mean=#
#==============================================================# 
root_region_id=execute_command.Cmiss_command_data_get_root_region(a)
region_1_id=execute_command.Cmiss_region_get_sub_region(root_region_id, "/mean")
region_1_number_of_nodes=execute_command.Cmiss_region_get_number_of_nodes_in_region(region_1_id)
print "Number of nodes in region:", region_1_number_of_nodes

#==========================================================================#
#=get cmiss_field objects from a region to query number of components of a=#
#=coordinate field                                                        =#
#==========================================================================#
field_1_id=execute_command.Cmiss_region_find_field_by_name(region_1_id, "coordinates")
field_1_number_of_components=execute_command.Cmiss_field_get_number_of_components(field_1_id)
print "Number of components in field:", field_1_number_of_components

#===============================================================================#
#=use cpointer.i from swig library to extract array of field values from a node=#
#===============================================================================#
node ="401"
array_size = field_1_number_of_components
field_val=[0.0]*array_size

node_1_id=execute_command.Cmiss_region_get_node(region_1_id,node)
node_1_fieldval = execute_command.new_float_array(array_size)
execute_command.Cmiss_field_evaluate_at_node(field_1_id, node_1_id, 0, array_size, node_1_fieldval)

for i in range(0,array_size):
    field_val[i]=execute_command.float_array_getitem(node_1_fieldval,i)

print "field values at node", node, ":", field_val

#=======================#
#=creating a new region=#
#=======================#
new_region_id=execute_command.Cmiss_region_create()
num_nodes=execute_command.Cmiss_region_get_number_of_nodes_in_region(new_region_id)

#==========================================#
#=opening new cmgui windows (causes crash)=#
#==========================================#
execute_command.Cmiss_command_data_execute_command(a, "gfx cre win 1")
execute_command.Cmiss_command_data_execute_command(a, "gfx edit scene")



